# üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã package-lock.json

## –ü—Ä–æ–±–ª–µ–º–∞

–ü–æ–ª—É—á–µ–Ω–∞ –æ—à–∏–±–∫–∞ –≤ GitHub Actions:
```
npm error `npm ci` can only install packages when your package.json and package-lock.json are in sync
npm error Missing: eslint-plugin-security@3.0.1 from lock file
```

## –ü—Ä–∏—á–∏–Ω–∞

–ú—ã –¥–æ–±–∞–≤–∏–ª–∏ `eslint-plugin-security` –≤ `package.json`, –Ω–æ –Ω–µ –æ–±–Ω–æ–≤–∏–ª–∏ `package-lock.json`. GitHub Actions –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `npm ci`, –∫–æ—Ç–æ—Ä—ã–π —Ç—Ä–µ–±—É–µ—Ç —Ç–æ—á–Ω–æ–≥–æ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è –º–µ–∂–¥—É —ç—Ç–∏–º–∏ —Ñ–∞–π–ª–∞–º–∏.

## üöÄ –†–µ—à–µ–Ω–∏–µ

### –í–∞—Ä–∏–∞–Ω—Ç 1: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ (–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

Workflow'—ã —Ç–µ–ø–µ—Ä—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏—Å–ø—Ä–∞–≤–ª—è—é—Ç —ç—Ç—É –ø—Ä–æ–±–ª–µ–º—É:

1. **–°–Ω–∞—á–∞–ª–∞ –ø—Ä–æ–±—É—é—Ç `npm ci`**
2. **–ü—Ä–∏ –æ—à–∏–±–∫–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç `npm install`** –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è lock file
3. **–ü—Ä–æ–≤–µ—Ä—è—é—Ç –Ω–∞–ª–∏—á–∏–µ `eslint-plugin-security`** –∏ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—é—Ç –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏

### –í–∞—Ä–∏–∞–Ω—Ç 2: –†—É—á–Ω–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ

–ï—Å–ª–∏ –Ω—É–∂–Ω–æ –∏—Å–ø—Ä–∞–≤–∏—Ç—å –ª–æ–∫–∞–ª—å–Ω–æ:

```bash
# –ü–µ—Ä–µ–π—Ç–∏ –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é client
cd client

# –£–¥–∞–ª–∏—Ç—å —Å—Ç–∞—Ä—ã–µ —Ñ–∞–π–ª—ã
rm -rf package-lock.json node_modules

# –ü–µ—Ä–µ—É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –≤—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
npm install

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ eslint-plugin-security —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
npm ls eslint-plugin-security

# –ó–∞–∫–æ–º–º–∏—Ç–∏—Ç—å –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π lock file
git add package-lock.json
git commit -m "üîí Update package-lock.json for eslint-plugin-security"
git push
```

### –í–∞—Ä–∏–∞–Ω—Ç 3: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ workflow

–°–æ–∑–¥–∞–Ω —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–π workflow `update-lockfile.yml`, –∫–æ—Ç–æ—Ä—ã–π:

1. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±–Ω–∞—Ä—É–∂–∏–≤–∞–µ—Ç** –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ `package.json`
2. **–û–±–Ω–æ–≤–ª—è–µ—Ç `package-lock.json`**
3. **–ö–æ–º–º–∏—Ç–∏—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è** –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
4. **–î–æ–±–∞–≤–ª—è–µ—Ç –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –≤ PR** –æ –≤–Ω–µ—Å–µ–Ω–Ω—ã—Ö –∏–∑–º–µ–Ω–µ–Ω–∏—è—Ö

## ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤ Workflow'–∞—Ö

### –ß—Ç–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å:

1. **security-audit.yml** - –¢–µ–ø–µ—Ä—å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç fallback –ª–æ–≥–∏–∫—É
2. **cursor-ai-review.yml** - –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –∏ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç security plugin
3. **dependency-security.yml** - –£—Å—Ç–æ–π—á–∏–≤ –∫ –ø—Ä–æ–±–ª–µ–º–∞–º —Å lock file
4. **update-lockfile.yml** - –ù–æ–≤—ã–π workflow –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è

### –õ–æ–≥–∏–∫–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:

```yaml
# Try npm ci first, fallback to npm install if lock file is out of sync
if npm ci; then
  echo "‚úÖ Dependencies installed successfully with npm ci"
else
  echo "‚ö†Ô∏è npm ci failed, trying npm install to fix lock file..."
  npm install
  echo "‚úÖ Dependencies installed with npm install"
fi

# Verify security plugin is available
if npm ls eslint-plugin-security > /dev/null 2>&1; then
  echo "‚úÖ eslint-plugin-security is available"
else
  echo "üì¶ Installing eslint-plugin-security..."
  npm install eslint-plugin-security@3.0.1 --save-dev
fi
```

## üéØ –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### –ü–æ—Å–ª–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π:

1. **–°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π PR** –∏–ª–∏ –æ–±–Ω–æ–≤–∏—Ç–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π
2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ GitHub Actions** - –æ–Ω–∏ –¥–æ–ª–∂–Ω—ã –ø—Ä–æ–π—Ç–∏ —É—Å–ø–µ—à–Ω–æ
3. **–£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ security audit —Ä–∞–±–æ—Ç–∞–µ—Ç** –∏ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã

### –õ–æ–∫–∞–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞:

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω—ã
npm ci

# –ó–∞–ø—É—Å—Ç–∏—Ç—å security –∞–Ω–∞–ª–∏–∑
npm run cursor:security

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å ESLint —Å security –ø—Ä–∞–≤–∏–ª–∞–º–∏
npm run lint:security
```

## üîÑ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è

### –í –±—É–¥—É—â–µ–º:

1. **Workflow `update-lockfile.yml`** –±—É–¥–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±–Ω–æ–≤–ª—è—Ç—å lock file
2. **Security workflows** —É—Å—Ç–æ–π—á–∏–≤—ã –∫ –ø—Ä–æ–±–ª–µ–º–∞–º —Å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏
3. **–õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞** –Ω–µ —Ç—Ä–µ–±—É–µ—Ç —Ä—É—á–Ω–æ–≥–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### –ü—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –Ω–æ–≤—ã—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π:

```bash
# –î–æ–±–∞–≤–ª—è–π—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ–±—ã—á–Ω—ã–º —Å–ø–æ—Å–æ–±–æ–º
npm install new-package

# Lock file –æ–±–Ω–æ–≤–∏—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
# –ü—Ä–∏ push'–µ –≤ GitHub workflow –ø—Ä–æ–≤–µ—Ä–∏—Ç —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—é
```

## üìã –°—Ç–∞—Ç—É—Å –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

- ‚úÖ **security-audit.yml** - –ò—Å–ø—Ä–∞–≤–ª–µ–Ω —Å fallback –ª–æ–≥–∏–∫–æ–π
- ‚úÖ **cursor-ai-review.yml** - –ò—Å–ø—Ä–∞–≤–ª–µ–Ω —Å –ø—Ä–æ–≤–µ—Ä–∫–æ–π security plugin
- ‚úÖ **dependency-security.yml** - –ò—Å–ø—Ä–∞–≤–ª–µ–Ω —Å —É—Å—Ç–æ–π—á–∏–≤–æ–π —É—Å—Ç–∞–Ω–æ–≤–∫–æ–π
- ‚úÖ **update-lockfile.yml** - –°–æ–∑–¥–∞–Ω –Ω–æ–≤—ã–π workflow
- ‚úÖ **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è** - –î–æ–±–∞–≤–ª–µ–Ω—ã –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—é

## üöÄ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. **–°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π commit** —Å –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–º–∏ workflow'–∞–º–∏
2. **Push –∏–∑–º–µ–Ω–µ–Ω–∏—è** –≤ GitHub
3. **–°–æ–∑–¥–∞–π—Ç–µ —Ç–µ—Å—Ç–æ–≤—ã–π PR** –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ä–∞–±–æ—Ç—ã security audit
4. **–£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –≤—Å–µ workflow'—ã –ø—Ä–æ—Ö–æ–¥—è—Ç** —É—Å–ø–µ—à–Ω–æ

–¢–µ–ø–µ—Ä—å GitHub Actions –¥–æ–ª–∂–Ω—ã —Ä–∞–±–æ—Ç–∞—Ç—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ–º –ø—Ä–æ–±–ª–µ–º —Å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏!
